<mat-toolbar class="view-header mat-elevation-z1">
  <span class="title">{{documentType?.folder | uppercase}}</span>
  <!-- This fills the remaining space of the current row -->
  <span class="app-toolbar-filler"></span>

  <button color="primary" (click)="add_new()" mat-button>NEO ΠΑΡΑΣΤΑΤΙΚΟ</button>

  <label class="divider">|</label>
  <button color="warn" (click)="toggleInfoPanel()" mat-icon-button>
    <mat-icon>info</mat-icon>
  </button>

  <!-- <label class="divider">|</label>
  <mat-button-toggle-group name="viewoptions" #viewoptions="matButtonToggleGroup" [value]="viewmode">
    <mat-button-toggle color="primary" value="grid">
      <mat-icon>view_module</mat-icon>
    </mat-button-toggle>
    <mat-button-toggle color="primary" value="list">
      <mat-icon>list</mat-icon>
    </mat-button-toggle>
  </mat-button-toggle-group> -->
  <!-- <label class="divider">|</label>
  <mat-select placeholder="ταξινόμηση" class="toolbar" [(value)]="sortfield">
    <mat-option value="date">Ημερομηνία</mat-option>
    <mat-option value="dueDate">Ημερομηνία πληρωμής</mat-option>
    <mat-option value="numberPrintable">Αριθμός</mat-option>
    <mat-option value="status">Κατάσταση</mat-option>
    <mat-option value="recipient">Πελάτης</mat-option>
  </mat-select>
  <mat-button-toggle-group name="sortoptions" #sortoptions="matButtonToggleGroup" [value]="sortdirection">
    <mat-button-toggle color="primary" value="+">
      <mat-icon>keyboard_arrow_down</mat-icon>
    </mat-button-toggle>
    <mat-button-toggle color="primary" value="-">
      <mat-icon>keyboard_arrow_up</mat-icon>
    </mat-button-toggle>
  </mat-button-toggle-group> -->
  <!-- <label class="divider">|</label> -->

  <span class="app-toolbar-right-filler"></span>
</mat-toolbar>

<div class="view-content">
  <div fxLayout="row" *ngIf="!norecords">
    <div fxFlex>
      <mat-toolbar>
        <mat-form-field floatPlaceholder='never'>
          <input mat-input [(ngModel)]="searchText" matInput type="text" placeholder="Αναζήτηση" maxlength="300">
        </mat-form-field>
        <button mat-icon-button (click)="search()">
          <mat-icon color="primary">search</mat-icon>
        </button>

        <span class="app-toolbar-filler"></span>
        <!-- put pager here -->
        <mat-paginator [length]="count" [pageIndex]="pageindex" nextPageLabel="επόμενη" previousPageLabel="προηγούμενη"  itemsPerPageLabel="έγγραφα ανα σελίδα" [pageSize]="pagesize" [pageSizeOptions]="[5, 10, 25, 100]">
        </mat-paginator>
        <span class="app-toolbar-right-filler"></span>
      </mat-toolbar>

      <!-- *ngIf="viewoptions.value=='grid'" -->
      <div fxLayout="row" fxLayout.lt-md="column" fxLayoutWrap fxLayoutAlign="start start">
        <mat-card class="doc-card" *ngFor="let doc of documents;let i = index;">
          <div class="selected-item" *ngIf="selected && doc.id===selected.id" fxFlexAlign="end"></div>
          <!-- <mat-icon class="selected-icon" *ngIf="selected && doc.id===selected.id">check_circle</mat-icon> -->
          <mat-card-header (click)="setSelected(doc)" class="clickable-header">
            <mat-card-title>
              <h2 *ngIf="doc.model.numberPrintable">{{doc.model.numberPrintable}}</h2>
              <h2 *ngIf="!doc.model.numberPrintable">{{doc.model.status}}</h2>
              <label class="small">{{doc.documentType.name}}</label>
            </mat-card-title>
            <mat-divider></mat-divider>
            <mat-card-title>ΣΥΝΟΛΟ: {{doc.model.total | currency:doc.model.currencyCode}}</mat-card-title>
            <mat-card-subtitle>ΠΛΗΡΩΤΕΟ: {{doc.model.totalPayable | currency:doc.model.currencyCode}}</mat-card-subtitle>
            <mat-card-subtitle>{{doc.model.date | date:'shortDate'}}</mat-card-subtitle>
            <mat-card-title>{{doc.model?.recipient?.organisation?.name}}</mat-card-title>
            <mat-card-subtitle>{{doc.model?.recipient?.contact?.displayName}}</mat-card-subtitle>
          </mat-card-header>
          <mat-card-content>

          </mat-card-content>
        </mat-card>
      </div>
      
      <mat-toolbar>
        <span class="app-toolbar-filler"></span>
        <!-- put pager here -->
        <mat-paginator [length]="count" [pageIndex]="pageindex" nextPageLabel="επόμενη" previousPageLabel="προηγούμενη"  itemsPerPageLabel="έγγραφα ανα σελίδα" [pageSize]="pagesize" [pageSizeOptions]="[5, 10, 25, 100]">
        </mat-paginator>
        <span class="app-toolbar-right-filler"></span>
      </mat-toolbar>
    </div>
    <div fxFlex="360px" fxLayoutAlign="start stretch" fxShow fxHide.lt-md class="doc-info-panel" *ngIf="showInfo">
      <div class="no-records" fxLayout="column" fxLayoutAlign="center center" *ngIf="!selected">
        <label class="small">δεν έχετε επιλέξει καποιο έγγραφο.</label>
        <img src="assets/images/no-records.png" class="no-records">
        <button color="primary" (click)="add_new()" mat-button>
          <label class="small">ΝΕΟ ΠΑΡΑΣΤΑΤΙΚΟ!</label>
        </button>
      </div>
      <div *ngIf="selected">
        <label class="small">{{selected.documentType.name}}</label>
        <h1 *ngIf="selected.model.numberPrintable">{{selected.model.numberPrintable}}</h1>
        <h2 *ngIf="!selected.model.numberPrintable">{{selected.model.status}} {{selected.model.date | date:'longDate'}}</h2>
        <h3 *ngIf="selected.model.numberPrintable">{{selected.model.date | date:'shortDate'}}</h3>
        <!-- <iframe class="preview-doc" ></iframe> -->
        <a class="portal-link" [href]="selected.safe_portal_link" target="__new" mat-button>
          <div class="wrap">
            <iframe class="frame" [attr.src]="selected.safe_portal_link">
            </iframe>
          </div>
        </a>
        <!-- <label class="small">ΣΕΛΙΔΑ ΠΕΛΑΤΗ</label> -->
        <br>
        <label class="small" *ngIf="selected.model.recipient.organisation || selected.model.recipient.contact">ΠΕΛΑΤΗΣ</label>
        <h2 *ngIf="selected.model.recipient.organisation">{{selected.model.recipient.organisation.name}}</h2>
        <label *ngIf="selected.model.recipient.organisation">{{selected.model.recipient.organisation.legalName}}</label>
        <h2 *ngIf="selected.model.recipient.contact">{{selected.model.recipient.contact.firstName}} {{selected.model.recipient.contact.lastName}}</h2>
        <label class="small">ΣΥΝΟΛΟ</label>
        <h2>{{selected.model.total | currency:selected.model.currencyCode}}</h2>
        <label class="small">ΠΛΗΡΩΤΕΟ</label>
        <h3>{{selected.model.totalPayable | currency:selected.model.currencyCode}}</h3>
        <mat-divider></mat-divider>
        <a [download]='selected.model.id+".docx"' (click)='download_file($event)' mat-button class="download-link">
          <img class="word-logo small">
        </a>
      </div>
    </div>
  </div>



  <div class="no-records" fxLayout="column" fxLayoutAlign="center center" *ngIf="norecords">
    <label class="small">δεν βρέθηκαν έγγραφα.</label>
    <img src="assets/images/no-records.png" class="no-records">
    <button color="primary" (click)="add_new()" mat-button>
      <label class="small">ΞΕΚΙΝΗΣΤΕ ΕΔΩ!</label>
    </button>
  </div>
</div>
